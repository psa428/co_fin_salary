{"ast":null,"code":"import { getUser } from \"./get-user\";\nimport { addUser } from \"./add-user\";\nimport { createSession } from \"./create-session\";\nexport const server = {\n  async authorize(authLogin, authPassword) {\n    console.log(` in bff server autorize`);\n    const user = await getUser(authLogin);\n    if (!user) {\n      return {\n        error: 'Пользователь не найден',\n        res: null\n      };\n    }\n    ;\n    if (authPassword !== user.passsword) {\n      return {\n        error: 'Неверный пароль',\n        res: null\n      };\n    }\n    ;\n    return {\n      error: null,\n      res: createSession(user.role_id)\n    };\n  },\n  async register(regLogin, regPassword) {\n    const user = await getUser(regLogin);\n    if (!user) {\n      return {\n        error: 'Такой логин уже занят',\n        res: null\n      };\n    }\n    addUser(regLogin);\n    return {\n      error: null,\n      res: createSession(user.role_id)\n    };\n  }\n};","map":{"version":3,"names":["getUser","addUser","createSession","server","authorize","authLogin","authPassword","console","log","user","error","res","passsword","role_id","register","regLogin","regPassword"],"sources":["/home/psa/develop/result-school/blog/src/bff/server.js"],"sourcesContent":["import { getUser } from \"./get-user\";\nimport { addUser } from \"./add-user\";\nimport { createSession } from \"./create-session\";\n\n\n\n\nexport const server = {\n    \n    async authorize(authLogin, authPassword) {\n        console.log(` in bff server autorize`);\n        const user = await getUser(authLogin);\n\n        if (!user) {\n            return {\n                error: 'Пользователь не найден',\n                res:    null,\n            };\n        };\n\n        if (authPassword !== user.passsword) {\n            return {\n                error: 'Неверный пароль',\n                res:    null,\n            };\n        };\n        \n\n        return {\n            error:  null,\n            res:  createSession(user.role_id),\n        };\n    },\n    async register(regLogin,regPassword){\n        const user = await getUser(regLogin);\n\n\n        if (!user) {\n            return {\n                error: 'Такой логин уже занят',\n                res:    null,\n            };\n        }\n\n       addUser(regLogin);\n\n        return {\n            error:  null,\n            res:  createSession(user.role_id),\n        };\n\n    }\n\n};\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,YAAY;AACpC,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,aAAa,QAAQ,kBAAkB;AAKhD,OAAO,MAAMC,MAAM,GAAG;EAElB,MAAMC,SAASA,CAACC,SAAS,EAAEC,YAAY,EAAE;IACrCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtC,MAAMC,IAAI,GAAG,MAAMT,OAAO,CAACK,SAAS,CAAC;IAErC,IAAI,CAACI,IAAI,EAAE;MACP,OAAO;QACHC,KAAK,EAAE,wBAAwB;QAC/BC,GAAG,EAAK;MACZ,CAAC;IACL;IAAC;IAED,IAAIL,YAAY,KAAKG,IAAI,CAACG,SAAS,EAAE;MACjC,OAAO;QACHF,KAAK,EAAE,iBAAiB;QACxBC,GAAG,EAAK;MACZ,CAAC;IACL;IAAC;IAGD,OAAO;MACHD,KAAK,EAAG,IAAI;MACZC,GAAG,EAAGT,aAAa,CAACO,IAAI,CAACI,OAAO;IACpC,CAAC;EACL,CAAC;EACD,MAAMC,QAAQA,CAACC,QAAQ,EAACC,WAAW,EAAC;IAChC,MAAMP,IAAI,GAAG,MAAMT,OAAO,CAACe,QAAQ,CAAC;IAGpC,IAAI,CAACN,IAAI,EAAE;MACP,OAAO;QACHC,KAAK,EAAE,uBAAuB;QAC9BC,GAAG,EAAK;MACZ,CAAC;IACL;IAEDV,OAAO,CAACc,QAAQ,CAAC;IAEhB,OAAO;MACHL,KAAK,EAAG,IAAI;MACZC,GAAG,EAAGT,aAAa,CAACO,IAAI,CAACI,OAAO;IACpC,CAAC;EAEL;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}